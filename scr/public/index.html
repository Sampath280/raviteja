<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Static Web App with Azure SQL</title>
</head>
<body>
    <h1>Static Web Apps Database Connections</h1>
    <blockquote>Open the console in the browser developer tools to see the API responses.</blockquote>
    <div>
        <button id="listAuthors" onclick="listAuthors()">List Authors</button>
        <button id="listComments" onclick="listComments()">List Comments</button>
        <button id="getAuthor" onclick="getAuthor()">Get Author</button>
        <button id="createAuthor" onclick="createAuthor()">Create Author</button>
        <button id="updateAuthor" onclick="updateAuthor()">Update Author</button>
        <button id="deleteAuthor" onclick="deleteAuthor()">Delete Author</button>
    </div>
    <script>
        // List all authors
        async function listAuthors() {
            const response = await fetch('/api/authors');
            const data = await response.json();
            console.table(data);
        }

        // List all comments
        async function listComments() {
            const response = await fetch('/api/comments');
            const data = await response.json();
            console.table(data);
        }

        // Get a single author by ID
        async function getAuthor() {
            const id = 1; // Change as needed
            const response = await fetch(`/api/authors/${id}`);
            const data = await response.json();
            console.table(data);
        }

        // Create a new author
        async function createAuthor() {
            const response = await fetch('/api/authors', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name: 'New Author' })
            });
            const data = await response.json();
            console.table(data);
        }

        // Update an author
        async function updateAuthor() {
            const id = 1; // Change as needed
            const response = await fetch(`/api/authors/${id}`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name: 'Updated Author' })
            });
            const data = await response.json();
            console.table(data);
        }

        // Delete an author
        async function deleteAuthor() {
            const id = 1; // Change as needed
            const response = await fetch(`/api/authors/${id}`, {
                method: 'DELETE'
            });
            console.log(await response.text());
        }
    </script>
</body>
</html>
